<div class="payment-container">
  <h2>ðŸ’³ Payment Component</h2>

  <form [formGroup]="paymentForm">
    <!-- Select User -->
    <label for="userId">Select User</label>
    <select formControlName="userId" (change)="onUserChange()">
      <option value="" disabled>Select User</option>
      <option *ngFor="let user of users" [value]="user.id">
        {{ user.id }} | {{ user.firstName }} {{ user.lastName }}
      </option>
    </select>

    <!-- Action Selection -->
    <label for="action">Action</label>
    <select formControlName="action" (change)="onActionChange()">
      <option value="" disabled>Select Action</option>
      <option *ngFor="let action of actions">{{ action }}</option>
    </select>

    <!-- From Account -->
    <label for="fromAccount">From Account</label>
    <select formControlName="fromAccount">
      <option value="" disabled>Select Account</option>
      <option *ngFor="let acc of accounts" [value]="acc.id">
        {{ acc.id }} | {{ acc.accountHolderName }} | {{ acc.accountNumber }} | Balance: â‚¹{{ acc.balance }}
      </option>
    </select>

    <!-- To Account (only for transfer) -->
    <div *ngIf="selectedAction === 'Transfer'">
      <label for="toAccount">To Account</label>
      <select formControlName="toAccount">
        <option value="" disabled>Select Account</option>
        <option *ngFor="let acc of accounts" [value]="acc.id">
          {{ acc.id }} | {{ acc.accountHolderName }} | {{ acc.accountNumber }} | Balance: â‚¹{{ acc.balance }}
        </option>
      </select>
    </div>

    <!-- Amount -->
    <label for="amount">Amount</label>
    <input type="number" formControlName="amount" placeholder="Enter amount">

    <!-- Buttons -->
    <button type="button" (click)="submitPayment()">Submit</button>
    <button type="button" (click)="showHistory()">Show History</button>
  </form>

  <!-- History -->
  <div *ngIf="showingHistory">
    <h3>ðŸ“œ Transaction History</h3>
    <ul>
      <li *ngFor="let tx of history">
        <strong>{{tx.type}}</strong> | 
        â‚¹{{tx.amount}} |
        From: {{tx.holderName}} ({{tx.bankName}} - {{tx.accountNumber}})
        <span *ngIf="tx.type === 'Transfer'">
          â†’ To: {{tx.toHolderName}} ({{tx.toBankName}} - {{tx.toAccountNumber}})
        </span>
        | Date: {{tx.timestamp | date:'short'}}
      </li>
    </ul>
  </div>
</div>
